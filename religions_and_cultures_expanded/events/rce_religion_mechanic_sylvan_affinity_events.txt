namespace = rce_religion_mechanic_sylvan_affinity_events

country_event = {
	id = rce_religion_mechanic_sylvan_affinity_events.1
	title = rce_religion_mechanic_sylvan_affinity_events.EVTNAME1
	desc = rce_religion_mechanic_sylvan_affinity_events.EVTDESC1
	picture = RELIGION_eventPicture

	is_triggered_only = yes

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events1.EVTOPT1

		rce_set_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = spring }
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events1.EVTOPT2

		rce_set_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = summer }
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events1.EVTOPT3

		rce_set_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = fall }
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events1.EVTOPT4

		rce_set_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = winter }
	}
}

country_event = {
	id = rce_religion_mechanic_sylvan_affinity_events.2
	title = rce_religion_mechanic_sylvan_affinity_events.EVTNAME2
	desc = rce_religion_mechanic_sylvan_affinity_events.EVTDESC2
	picture = ANGRY_MOB_eventPicture

	is_triggered_only = yes

	goto = grove_province

	trigger = {
		rce_uses_religion_mechanic = { mechanic = sylvan_affinity }
		any_owned_province = {
			OR = {
				has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier
				has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier
				has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier
				has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier
			}
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_compromised_with_grove_arsonists_modifier }
		}
	}

	mean_time_to_happen = {
		days = 1
		modifier = {
			factor = 1.1
			any_owned_province = {
				OR = {
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier
				}
				NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_compromised_with_grove_arsonists_modifier }
				NOT = { development = 10 }
			}
		}
		modifier = {
			factor = 0.9
			any_owned_province = {
				OR = {
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier
				}
				NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_compromised_with_grove_arsonists_modifier }
				development = 30
			}
		}
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					OR = {
						has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier
						has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier
						has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier
						has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier
					}
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_compromised_with_grove_arsonists_modifier }
				}
				save_event_target_as = grove_province
			}
		}
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events2.EVTOPT1

		ai_chance = { factor = 0 }

		add_prestige = -10
		event_target:grove_province = {
			anti_tax_rebels = 1
		}
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events2.EVTOPT2

		ai_chance = { factor = 1 }

		event_target:grove_province = {
			area = {
				limit = {
					owned_by = ROOT
				}
				add_local_autonomy = 10
			}
		}
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events2.EVTOPT3

		highlight = yes

		trigger = {
			OR = {
				ruler_has_personality = just_personality
				ruler_has_personality = kind_hearted_personality
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = charismatic_negotiator_personality
			}
		}

		ai_chance = { factor = 10 }

		event_target:grove_province = {
			add_province_modifier = {
				name = rce_religion_mechanic_sylvan_affinity_compromised_with_grove_arsonists_modifier
				duration = 3650
			}
		}
	}
}

country_event = {
	id = rce_religion_mechanic_sylvan_affinity_events.3
	title = rce_religion_mechanic_sylvan_affinity_events.EVTNAME3
	desc = rce_religion_mechanic_sylvan_affinity_events.EVTDESC3
	picture = {
		trigger = {
			is_mod_active = "The Great Exhibition"
		}
		picture = RCE_FOREST_TGE_eventPicture
	}
	picture = {
		trigger = {
			NOT = { is_mod_active = "The Great Exhibition" }
		}
		picture = RCE_FOREST_eventPicture
	}

	is_triggered_only = yes

	goto = target_province

	trigger = {
		rce_uses_religion_mechanic = { mechanic = sylvan_affinity }
		any_owned_province = {
			has_owner_religion = yes
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_area_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_area_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_area_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_area_modifier }
			NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_tree_of_life_location_modifier }
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		hidden_effect = {
			random_owned_province = {
				limit = {
					has_owner_religion = yes
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_spring_grove_area_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_summer_grove_area_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_fall_grove_area_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier }
					NOT = { has_province_modifier = rce_religion_mechanic_sylvan_affinity_winter_grove_area_modifier }
				}
				save_event_target_as = target_province
			}
		}
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events3.EVTOPT1

		trigger = {
			rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity_selected = yes
		}

		ai_chance = { factor = 0.5 }

		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 15
			}
		}
		if = {
			limit = {
				rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = spring }
			}
			event_target:target_province = {
				add_base_manpower = 2
				add_province_modifier = {
					name = rce_religion_mechanic_sylvan_affinity_spring_grove_province_modifier
					duration = 1825
				}
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = rce_religion_mechanic_sylvan_affinity_spring_grove_area_modifier
						duration = 1825
					}
				}
			}
		}
		else_if = {
			limit = {
				rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = summer }
			}
			event_target:target_province = {
				add_base_tax = 2
				add_province_modifier = {
					name = rce_religion_mechanic_sylvan_affinity_summer_grove_province_modifier
					duration = 1825
				}
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = rce_religion_mechanic_sylvan_affinity_summer_grove_area_modifier
						duration = 1825
					}
				}
			}
		}
		else_if = {
			limit = {
				rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = fall }
			}
			event_target:target_province = {
				add_base_production = 2
				add_province_modifier = {
					name = rce_religion_mechanic_sylvan_affinity_fall_grove_province_modifier
					duration = 1825
				}
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = rce_religion_mechanic_sylvan_affinity_fall_grove_area_modifier
						duration = 1825
					}
				}
			}
		}
		else_if = {
			limit = {
				rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { season = winter }
			}
			event_target:target_province = {
				random_list = {
					33 = {
						add_base_tax = 2
					}
					33 = {
						add_base_production = 2
					}
					33 = {
						add_base_manpower = 2
					}
				}
				add_province_modifier = {
					name = rce_religion_mechanic_sylvan_affinity_winter_grove_province_modifier
					duration = 1825
				}
				area = {
					limit = {
						owned_by = ROOT
					}
					add_province_modifier = {
						name = rce_religion_mechanic_sylvan_affinity_winter_grove_area_modifier
						duration = 1825
					}
				}
			}
		}
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events3.EVTOPT2

		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0.1
				has_estate = estate_church
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
			modifier = {
				factor = 0
				has_estate = estate_church
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 30
					}
				}
			}
			modifier = {
				factor = 0.5
				rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { value = 80 }
			}
			modifier = {
				factor = 5
				NOT = { rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { value = 20 } }
			}
		}

		if = {
			limit = {
				has_estate = estate_church
			}
			add_estate_loyalty = {
				estate = estate_church
				loyalty = -10
			}
		}
		rce_add_religion_mechanic_sylvan_affinity_value = { value = 20 }
	}

	option = {
		name = rce_religion_mechanic_sylvan_affinity_events3.EVTOPT3

		trigger = {
			NOT = {
				any_owned_province = {
					has_province_modifier = rce_religion_mechanic_sylvan_affinity_tree_of_life_location_modifier
				}
			}
		}

		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { rce_has_religion_mechanic_sylvan_affinity_seasonal_affinity = { value = 80 } }
			}
		}

		rce_add_religion_mechanic_sylvan_affinity_value = { value = -15 }
		random = {
			chance = 10
			event_target:target_province = {
				add_province_modifier = {
					name = rce_religion_mechanic_sylvan_affinity_tree_of_life_location_modifier
					duration = -1
				}
			}
		}
		rce_export_monthly_religion_mechanic_sylvan_affinity_value_gain = yes
	}
}