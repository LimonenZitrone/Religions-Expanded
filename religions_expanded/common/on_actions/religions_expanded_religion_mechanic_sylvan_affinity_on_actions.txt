on_startup = {
	if = {
		limit = {
			NOT = { has_global_flag = religions_expanded_vidilist_initialized }
			started_in = 1444.11.11
			NOT = { started_in = 1445.1.1 }
		}
		set_global_flag = religions_expanded_vidilist_initialized
		271 = {
			if = {
				limit = {
					NOT = { religion = vidilist }
				}
				change_religion = vidilist
				add_permanent_province_modifier = {
					name = religious_zeal_at_conv
					duration = 1825
				}
			}
		}
		4535 = {
			if = {
				limit = {
					NOT = { religion = vidilist }
				}
				change_religion = vidilist
				add_permanent_province_modifier = {
					name = religious_zeal_at_conv
					duration = 1825
				}
			}
		}
	}
}

on_religion_change = {
	re_clear_all_religion_mechanic_sylvan_affinity_modifiers = yes
}

on_monthly_pulse = {
	if = {
		limit = {
			re_uses_religion_mechanic = { mechanic = sylvan_affinity }
		}
		re_add_monthly_religion_mechanic_sylvan_affinity_value = yes
	}
}

# ROOT = annexing country, FROM = annexed country
on_annexed = {
	FROM = {
		if = {
			limit = {
				re_uses_religion_mechanic = { mechanic = sylvan_affinity }
			}
			re_clear_all_religion_mechanic_sylvan_affinity_modifiers = yes
		}
	}
}

# ROOT = released country, FROM = releasing country
on_country_released = {
	re_clear_all_religion_mechanic_sylvan_affinity_modifiers = yes
}

# ROOT = released country
on_country_creation = {
	re_clear_all_religion_mechanic_sylvan_affinity_modifiers = yes
}

# ROOT = vassal, FROM = overlord
on_create_vassal = {
	re_clear_all_religion_mechanic_sylvan_affinity_modifiers = yes
}