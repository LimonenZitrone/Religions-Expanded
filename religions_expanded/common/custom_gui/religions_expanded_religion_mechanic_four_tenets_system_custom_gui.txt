custom_window = {
	name = re_religion_mechanic_four_tenets_system_window
	potential = {
		ai = no
		re_uses_religion_mechanic = { mechanic = four_tenets_system }
	}
}

custom_text_box = {
	name = re_religion_mechanic_four_tenets_system_title
	potential = {
		always = yes
	}
	tooltip = re_religion_mechanic_four_tenets_system_mechanic_tt
}

custom_button = {
	name = re_religion_mechanic_four_tenets_system_meditate_button
	# if you change this, make sure to change the re_religion_mechanic_four_tenets_system_meditate_decision decision accordingly
	trigger = {
		has_regency = no
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_4 = yes }
		if = {
			limit = {
				has_ruler_flag = re_religion_mechanic_four_tenets_system_meditated
			}
			custom_trigger_tooltip = {
				tooltip = re_religion_mechanic_four_tenets_system_meditated_not_done_recently_tt_with_year
				had_ruler_flag = { flag = re_religion_mechanic_four_tenets_system_meditated days = 2190 }
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = re_religion_mechanic_four_tenets_system_meditated_not_done_recently_tt
				always = yes
			}
		}
	}
	effect = {
		if = {
			limit = {
				has_ruler_modifier = re_religion_mechanic_four_tenets_system_meditate_modifier
			}
			tooltip = {
				add_country_modifier = {
					name = re_religion_mechanic_four_tenets_system_meditate_modifier
					duration = 365
					desc = RE_UNTIL_MONARCH_DEATH_OR_1_YEAR
				}
			}
		}
		else = {
			clr_ruler_flag = re_religion_mechanic_four_tenets_system_meditated
			set_ruler_flag = re_religion_mechanic_four_tenets_system_meditated
			add_ruler_modifier = {
				name = re_religion_mechanic_four_tenets_system_meditate_modifier
				duration = 365
			}
			re_export_monthly_religion_mechanic_four_tenets_system_value_gain = yes
			hidden_effect = {
				export_to_variable = {
					which = re_religion_mechanic_four_tenets_system_meditate_used_year
					value = trigger_value:is_year
				}
			}
		}
	}
	tooltip = re_religion_mechanic_four_tenets_system_meditate_button_tt
}

custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_2_bar_full
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_2 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_2_bar
	potential = {
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_2 = yes }
		re_has_religion_mechanic_four_tenets_system_value = { value = 1 }
	}
	frame_variable = re_religion_mechanic_four_tenets_system_value
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_2_bar_bg
	potential = {
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_2 = yes }
		NOT = { re_has_religion_mechanic_four_tenets_system_value = { value = 1 } }
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_2_bar_frame
	potential = {
		always = yes
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_2_progress_tt
}

custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_3_bar_full
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_3 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_3_bar
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_2 = yes
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_3 = yes }
		re_has_religion_mechanic_four_tenets_system_value = { value = 1 }
	}
	frame_variable = re_religion_mechanic_four_tenets_system_value
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_3_bar_bg
	potential = {
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_3 = yes }
		OR = {
			NOT = { re_has_religion_mechanic_four_tenets_system_ability_2 = yes }
			NOT = { re_has_religion_mechanic_four_tenets_system_value = { value = 1 } }
		}
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_3_bar_frame
	potential = {
		always = yes
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_3_progress_tt
}

custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_4_bar_full
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_4 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_4_bar
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_3 = yes
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_4 = yes }
		re_has_religion_mechanic_four_tenets_system_value = { value = 1 }
	}
	frame_variable = re_religion_mechanic_four_tenets_system_value
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_4_bar_bg
	potential = {
		NOT = { re_has_religion_mechanic_four_tenets_system_ability_4 = yes }
		OR = {
			NOT = { re_has_religion_mechanic_four_tenets_system_ability_3 = yes }
			NOT = { re_has_religion_mechanic_four_tenets_system_value = { value = 1 } }
		}
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_4_bar_frame
	potential = {
		always = yes
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_4_progress_tt
}

custom_button = {
	name = re_religion_mechanic_four_tenets_system_ability_1_button
	# if you change this, make sure to change the re_religion_mechanic_four_tenets_system_ability_1_decision decision accordingly
	trigger = {
		hidden_trigger = {
			NOT = { has_country_flag = re_religion_mechanic_four_tenets_system_selecting_ability_1 }
		}
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_1 = yes
			}
			hidden_trigger = {
				always = no
			}
		}
		else = {
			has_regency = no
		}
	}
	effect = {
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_1 = yes
			}
			custom_tooltip = re_religion_mechanic_four_tenets_system_ability_selected_tt
			tooltip = {
				if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_1_modifier_1
					}
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_1_modifier_1
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_1_modifier_2
					}
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_1_modifier_2
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_1_modifier_3
					}
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_1_modifier_3
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
			}
		}
		else = {
			country_event = { id = re_religion_mechanic_four_tenets_system_events.1 tooltip = re_religion_mechanic_four_tenets_system_ability_can_pick_tt }
			tooltip = {
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_1_modifier_1
					duration = -1
				}
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_1_modifier_2
					duration = -1
				}
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_1_modifier_3
					duration = -1
				}
			}
		}
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_1_button_tt
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_1_button_selected
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_1 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_1_icon
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_1 = yes
	}
	frame = {
		number = 1
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_1_modifier_1
		}
	}
	frame = {
		number = 2
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_1_modifier_2
		}
	}
	frame = {
		number = 3
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_1_modifier_3
		}
	}
}

custom_button = {
	name = re_religion_mechanic_four_tenets_system_ability_2_button
	# if you change this, make sure to change the re_religion_mechanic_four_tenets_system_ability_2_decision decision accordingly
	trigger = {
		hidden_trigger = {
			NOT = { has_country_flag = re_religion_mechanic_four_tenets_system_selecting_ability_2 }
		}
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_2 = yes
			}
			hidden_trigger = {
				always = no
			}
		}
		else = {
			has_regency = no
			re_has_religion_mechanic_four_tenets_system_ability_1 = yes
			re_has_religion_mechanic_four_tenets_system_value = { value = 100 }
		}
	}
	effect = {
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_2 = yes
			}
			custom_tooltip = re_religion_mechanic_four_tenets_system_ability_selected_tt
			tooltip = {
				if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_2_modifier_1
					}
					change_adm = 1
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_2_modifier_1
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_2_modifier_2
					}
					change_dip = 1
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_2_modifier_2
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_2_modifier_3
					}
					change_mil = 1
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_2_modifier_3
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
			}
		}
		else = {
			country_event = { id = re_religion_mechanic_four_tenets_system_events.2 tooltip = re_religion_mechanic_four_tenets_system_ability_can_pick_tt }
			tooltip = {
				change_adm = 1
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_2_modifier_1
					duration = -1
				}
				change_dip = 1
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_2_modifier_2
					duration = -1
				}
				change_mil = 1
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_2_modifier_3
					duration = -1
				}
			}
		}
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_2_button_tt
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_2_button_selected
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_2 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_2_icon
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_2 = yes
	}
	frame = {
		number = 1
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_2_modifier_1
		}
	}
	frame = {
		number = 2
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_2_modifier_2
		}
	}
	frame = {
		number = 3
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_2_modifier_3
		}
	}
}

custom_button = {
	name = re_religion_mechanic_four_tenets_system_ability_3_button
	# if you change this, make sure to change the re_religion_mechanic_four_tenets_system_ability_3_decision decision accordingly
	trigger = {
		hidden_trigger = {
			NOT = { has_country_flag = re_religion_mechanic_four_tenets_system_selecting_ability_3 }
		}
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_3 = yes
			}
			hidden_trigger = {
				always = no
			}
		}
		else = {
			has_regency = no
			re_has_religion_mechanic_four_tenets_system_ability_2 = yes
			re_has_religion_mechanic_four_tenets_system_value = { value = 100 }
		}
	}
	effect = {
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_3 = yes
			}
			custom_tooltip = re_religion_mechanic_four_tenets_system_ability_selected_tt
			tooltip = {
				if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_3_modifier_1
					}
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_3_modifier_1
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_3_modifier_2
					}
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_3_modifier_2
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_3_modifier_3
					}
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_3_modifier_3
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
			}
		}
		else = {
			country_event = { id = re_religion_mechanic_four_tenets_system_events.3 tooltip = re_religion_mechanic_four_tenets_system_ability_can_pick_tt }
			tooltip = {
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_3_modifier_1
					duration = -1
				}
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_3_modifier_2
					duration = -1
				}
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_3_modifier_3
					duration = -1
				}
			}
		}
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_3_button_tt
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_3_button_selected
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_3 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_3_icon
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_3 = yes
	}
	frame = {
		number = 1
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_3_modifier_1
		}
	}
	frame = {
		number = 2
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_3_modifier_2
		}
	}
	frame = {
		number = 3
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_3_modifier_3
		}
	}
}

custom_button = {
	name = re_religion_mechanic_four_tenets_system_ability_4_button
	# if you change this, make sure to change the re_religion_mechanic_four_tenets_system_ability_4_decision decision accordingly
	trigger = {
		hidden_trigger = {
			NOT = { has_country_flag = re_religion_mechanic_four_tenets_system_selecting_ability_4 }
		}
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_4 = yes
			}
			hidden_trigger = {
				always = no
			}
		}
		else = {
			has_regency = no
			re_has_religion_mechanic_four_tenets_system_ability_3 = yes
			re_has_religion_mechanic_four_tenets_system_value = { value = 100 }
		}
	}
	effect = {
		if = {
			limit = {
				re_has_religion_mechanic_four_tenets_system_ability_4 = yes
			}
			custom_tooltip = re_religion_mechanic_four_tenets_system_ability_selected_tt
			tooltip = {
				if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_4_modifier_1
					}
					change_adm = 1
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_4_modifier_1
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_4_modifier_2
					}
					change_dip = 1
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_4_modifier_2
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
				else_if = {
					limit = {
						has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_4_modifier_3
					}
					change_mil = 1
					add_country_modifier = {
						name = re_religion_mechanic_four_tenets_system_ability_4_modifier_3
						duration = -1
						desc = RE_UNTIL_MONARCH_DEATH
					}
				}
			}
		}
		else = {
			country_event = { id = re_religion_mechanic_four_tenets_system_events.4 tooltip = re_religion_mechanic_four_tenets_system_ability_can_pick_tt }
			tooltip = {
				change_adm = 1
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_4_modifier_1
					duration = -1
				}
				change_dip = 1
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_4_modifier_2
					duration = -1
				}
				change_mil = 1
				add_ruler_modifier = {
					name = re_religion_mechanic_four_tenets_system_ability_4_modifier_3
					duration = -1
				}
			}
		}
	}
	tooltip = re_religion_mechanic_four_tenets_system_ability_4_button_tt
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_4_button_selected
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_4 = yes
	}
}
custom_icon = {
	name = re_religion_mechanic_four_tenets_system_ability_4_icon
	potential = {
		re_has_religion_mechanic_four_tenets_system_ability_4 = yes
	}
	frame = {
		number = 1
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_4_modifier_1
		}
	}
	frame = {
		number = 2
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_4_modifier_2
		}
	}
	frame = {
		number = 3
		trigger = {
			has_ruler_modifier = re_religion_mechanic_four_tenets_system_ability_4_modifier_3
		}
	}
}