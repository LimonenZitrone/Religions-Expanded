custom_window = {
	name = re_religion_mechanic_sukha_window
	potential = {
		ai = no
		re_uses_religion_mechanic = { mechanic = sukha }
	}
}

custom_text_box = {
	name = re_religion_mechanic_sukha_title
	potential = {
		always = yes
	}
	tooltip = re_religion_mechanic_sukha_mechanic_tt
}
custom_text_box = {
	name = re_religion_mechanic_sukha_value_text
	potential = {
		always = yes
	}
	tooltip = re_religion_mechanic_sukha_mechanic_tt
}
custom_icon = {
	name = re_religion_mechanic_sukha_bar
	potential = {
		re_has_religion_mechanic_sukha_value = { value = 1 }
	}
	frame_variable = re_religion_mechanic_sukha_value
}
custom_icon = {
	name = re_religion_mechanic_sukha_bar_bg
	potential = {
		NOT = { re_has_religion_mechanic_sukha_value = { value = 1 } }
	}
}
custom_button = {
	name = re_religion_mechanic_sukha_bar_overlay
	trigger = {
		hidden_trigger = {
			always = no # used to grab tooltip of effects
		}
	}
	effect = {
		re_religion_mechanic_sukha_show_current_modifier_tooltip = yes
		re_religion_mechanic_sukha_show_max_modifier_tooltip = yes
	}
	tooltip = re_religion_mechanic_sukha_mechanic_short_tt
}
custom_button = {
	name = re_religion_mechanic_sukha_meditate_button
	# if you change this, make sure to change the re_religion_mechanic_sukha_meditate_decision decision accordingly
	trigger = {
		adm_power = 50
		NOT = { re_has_religion_mechanic_sukha_value = { value = 100 } }
		if = {
			limit = {
				has_country_flag = re_religion_mechanic_sukha_meditate_used
			}
			custom_trigger_tooltip = {
				tooltip = re_religion_mechanic_sukha_meditate_not_used_recently_tt_with_year
				had_country_flag = { flag = re_religion_mechanic_sukha_meditate_used days = 3650 }
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = re_religion_mechanic_sukha_meditate_not_used_recently_tt
				always = yes
			}
		}
	}
	effect = {
		add_adm_power = -50
		re_add_religion_mechanic_sukha_value = { value = 10 }
		hidden_effect = {
			clr_country_flag = re_religion_mechanic_sukha_meditate_used
			set_country_flag = re_religion_mechanic_sukha_meditate_used
			export_to_variable = {
				which = re_religion_mechanic_sukha_meditate_used_year
				value = trigger_value:is_year
			}
		}
	}
	tooltip = re_religion_mechanic_sukha_meditate_button_tt
}
custom_button = {
	name = re_religion_mechanic_sukha_sponsor_festival_button
	# if you change this, make sure to change the re_religion_mechanic_sukha_sponsor_festival_decision decision accordingly
	trigger = {
		if = {
			limit = {
				monthly_income = 500
			}
			treasury = 3000
		}
		else_if = {
			limit = {
				NOT = { monthly_income = 17 }
			}
			treasury = 100
		}
		else = {
			years_of_income = 0.5
		}
		if = {
			limit = {
				has_country_flag = re_religion_mechanic_sukha_sponsor_festival_used
			}
			custom_trigger_tooltip = {
				tooltip = re_religion_mechanic_sukha_sponsor_festival_not_used_recently_tt_with_year
				had_country_flag = { flag = re_religion_mechanic_sukha_sponsor_festival_used days = 5475 }
			}
		}
		else = {
			custom_trigger_tooltip = {
				tooltip = re_religion_mechanic_sukha_sponsor_festival_not_used_recently_tt
				always = yes
			}
		}
	}
	effect = {
		if = {
			limit = {
				monthly_income = 500
			}
			add_treasury = -3000
		}
		else_if = {
			limit = {
				NOT = { monthly_income = 17 }
			}
			add_treasury = -100
		}
		else = {
			add_years_of_income = -0.5
		}
		custom_tooltip = re_religion_mechanic_sukha_sponsor_festival_button_tt_choice
		tooltip = {
			add_country_modifier = {
				name = re_religion_mechanic_sukha_sponsor_festival_paryushana_modifier
				duration = 1825
			}
			add_country_modifier = {
				name = re_religion_mechanic_sukha_sponsor_festival_nandishwar_ashtahnika_modifier
				duration = 1825
			}
			add_country_modifier = {
				name = re_religion_mechanic_sukha_sponsor_festival_diwali_modifier
				duration = 1825
			}
		}
		hidden_effect = {
			country_event = { id = re_religion_mechanic_sukha_events.1 }
			clr_country_flag = re_religion_mechanic_sukha_sponsor_festival_used
			set_country_flag = re_religion_mechanic_sukha_sponsor_festival_used
			export_to_variable = {
				which = re_religion_mechanic_sukha_sponsor_festival_used_year
				value = trigger_value:is_year
			}
		}
	}
	tooltip = re_religion_mechanic_sukha_sponsor_festival_button_tt
}